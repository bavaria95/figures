<html>
<head>
<title>Game</title>
</head>
<body>


<button onclick="generate_trapezoid()">Press this button!</button>
<!-- <button onclick="move()">Move!</button> -->


<script>
var window_width = window.screen.availWidth;
var window_height = window.screen.availHeight;

function generate_trapezoid() {
	var pos_x = Math.floor((Math.random() * (window_width - 210)));
	var pos_y = Math.floor((Math.random() * (window_height - 210)));

	console.log(pos_x, pos_y);

	var btn = document.createElement("DIV");        // Create a <button> element
	// var t = document.createTextNode("CLICK ME");       // Create a text node
	// btn.appendChild(t);                                // Append the text to <button>
	document.body.appendChild(btn);  

    var h1 = document.getElementsByTagName("div");   // Get the first <h1> element in the document
    var l = h1.length;
    h1 = h1[l - 1];
	var att = document.createAttribute("style");       // Create a "class" attribute
	att.value = "border-bottom: 100px solid red; border-left: 50px solid transparent; border-right: 50px solid transparent; height: 0; width: 100px; position: absolute; left: " + pos_x + "px" + "; top: " + pos_y + "px";                           // Set the value of the class attribute
	h1.setAttributeNode(att);
	var att = document.createAttribute("id");       // Create a "class" attribute
	att.value = "trapezoid" + l;
	h1.setAttributeNode(att);

	move();
}

function move() {
	type = 'trapezoid';
	id = 1;
	var fig = document.getElementById(type + id);

	console.log(fig);

	var x = parseInt(fig.style.left);
	var y = parseInt(fig.style.top);

	var angle = 0, lastTime = null;

	var dx = Math.floor((Math.random() * 10) + 1) * Math.pow(-1, Math.round(Math.random()));
	var dy = Math.floor((Math.random() * 10) + 1) * Math.pow(-1, Math.round(Math.random()));

	console.log(x, ' ', y, ' ', dx, ' ', dy);
	// console.log(x + dx + 'dx');
	function animate(time) {
    if (lastTime != null) {
      // angle += (time - lastTime) * 0.001;
      x += (time - lastTime) * dx * 0.05;
      y += (time - lastTime) * dy * 0.05;
    }
    lastTime = time;

    fig.style.left = x + "px";
    fig.style.top = y + "px";

    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}


</script>

</body>
</html>
